"""
Description:
Simple script to make it easier to encode a string as a URL value at the 
command line. 

Example:
  * python ./web-urlencode.py http://example.com/param=value!
"""

import urllib
import sys


# Global (module) variables


def print_usage():
  """
  Prints the usage information

  Args:
    None

  Yields:
    None

  Returns:
    None
  """

  print "usage:"
  print "python", sys.argv[0], "<str>|-"
  print "  str - the string to encode as a URL"
  print "  -   - read from stdin"


#
# Main entry point
#

try:
  # Initialise local variables
  str = ""

  # Check arguments/parameters
  if (len( sys.argv )) != 2:
    print "error: invalid arguments"
    print_usage()
    sys.exit()

  # Get string from stdin
  elif sys.argv[1] == "-":
    for line in sys.stdin:
      str += line

  # Get string from command line
  else:
    str = sys.argv[1]

  if (str == None) or (len(str) == 0):
    print "error: invalid string"
    sys.exit()
  else:
    print urllib.quote(str)
    
except Exception as e:
  print sys.exc_info()
  sys.exit()
